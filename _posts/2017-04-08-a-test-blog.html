---
date: 2017-04-08
tags: 
- tag1 org2jekyll
author: mzimmerm
layout: post
title: a-test-blog 
excerpt: Testing org2jekyll-create-draft
categories: 
- categories_required
---
<p>
This file is testing  misc org conversions to Html.
</p>

<p>
All props except dir are front matter, generated by <code>org2jekyll-create-draft</code>
</p>


<div id="outline-container-orgd41133a" class="outline-2">
<h2 id="orgd41133a">Basic Babel export to Html</h2>
<div class="outline-text-2" id="text-orgd41133a">
<p>
This source:
</p>

<div class="org-src-container">
<pre class="src src-org">#+BEGIN_SRC bash :exports both
ls -1
</pre>
</div>

<p>
Results in this:
</p>

<p>
#+END<sub>SRC</sub>
</p>
<div class="org-src-container">
<pre class="src src-bash">ls -1
</pre>
</div>

<pre class="example">
file-1.txt
</pre>
</div>
</div>

<div id="outline-container-org047016c" class="outline-2">
<h2 id="org047016c">What did <code>org2jekyll-create-draft</code> do</h2>
<div class="outline-text-2" id="text-org047016c">
<p>
It created an empty file with Org front matter like this:
</p>

<div class="org-src-container">
<pre class="src src-org"><span style="color: #b22222;">#+STARTUP: showall</span>
<span style="color: #b22222;">#+STARTUP: hidestars</span>
<span style="color: #b22222;">#+OPTIONS: H:2 num:nil tags:nil toc:nil timestamps:t</span>
<span style="color: #b22222;">#+LAYOUT: post</span>
<span style="color: #7f7f7f;">#+AUTHOR:</span> <span style="color: #191970;">mzimmerm</span>
<span style="color: #7f7f7f;">#+DATE:</span> <span style="color: #191970;">2017-04-08 Sat 17:23</span>
<span style="color: #7f7f7f;">#+TITLE:</span> <span style="color: #191970; font-weight: bold;">a-test-blog </span>
<span style="color: #b22222;">#+DESCRIPTION: Testing org2jekyll-create-draft</span>
<span style="color: #b22222;">#+TAGS: org_mode org2jekyll</span>
<span style="color: #b22222;">#+CATEGORIES: categories_required</span>
</pre>
</div>

<p>
The file name is <b>a-test-blog.org</b> so this is concatenated from title, with no date. 
</p>
</div>
</div>

<div id="outline-container-orgd7b9f90" class="outline-2">
<h2 id="orgd7b9f90">Verbatim vs Code = vs ~</h2>
<div class="outline-text-2" id="text-orgd7b9f90">
<ul class="org-ul">
<li>This is a <code>literal (verbatim) text</code> (surrounded by = ) in text.</li>

<li>This is a <code>literal code section text</code>  (surrounded by ~ ) in text.</li>

<li>So the above, by default, shows that verbatim and code has same font after conversion to html.</li>

<li>Next is src _ bash exports code: <code class="src src-bash">ls -l</code> as inline code - could just use <code>ls -l</code> but the src _ bash allows other options.</li>

<li>Next is src _ bash exports both does not work: src_ bash[:exports both]{ls -l} as inline code.</li>

<li>Next is src _ bash surrounded by ~ in text: <code>src_bash[:exports code]{ls -l}</code></li>

<li><p>
Last is using BEGIN_ SRC - this seems to format and everything
</p>

<div class="org-src-container">
<pre class="src src-bash">ls -l
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org01ada03" class="outline-2">
<h2 id="org01ada03">3 types of lists</h2>
<div class="outline-text-2" id="text-org01ada03">
<p>
The list test below is borrowed from <a href="http://www.network-theory.co.uk/docs/orgmode/Plainlists.html">http://www.network-theory.co.uk/docs/orgmode/Plainlists.html</a>
</p>

<p>
<i>Ordered List</i>: My favorite scenes are (in this order)
</p>
<ol class="org-ol">
<li>The attack of the Rohirrim</li>
<li>Eowyn's fight with the witch king
<ul class="org-ul">
<li>This was already my favorite scene in the book</li>
<li>I really like Miranda Otto.</li>
</ul></li>
<li>Peter Jackson being shot by Legolas</li>
<li>on DVD only</li>
</ol>
<p>
<i>Unordered List</i>: 
</p>
<ul class="org-ul">
<li>He makes a really funny face when it happens.</li>
<li>But in the end, no individual scenes matter but the film as a whole.</li>
</ul>
<p>
<i>Description List</i>: Does not indent items. Important actors in this film are:
</p>
<dl class="org-dl">
<dt>Elijah Wood  </dt><dd>He plays Frodo</dd>
<dt>Sean Astin   </dt><dd>He plays Sam, Frodo's friend.  I still remember 
him very well from his role as Mikey Walsh in The Goonies.</dd>
<dt>Abrakah Dabra</dt><dd>Is cool.</dd>
</dl>
</div>
</div>

<div id="outline-container-orga6e04b6" class="outline-2">
<h2 id="orga6e04b6">Code highlighting</h2>
<div class="outline-text-2" id="text-orga6e04b6">
<p>
Bash code:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #a0522d;">AVAR</span>=<span style="color: #8b2252;">"something"</span>
<span style="color: #a0522d;">OTHER</span>=<span style="color: #8b2252;">"soma else"</span>

<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"Variable AVAR is set to ${AVAR}"</span>
<span style="color: #a020f0;">if</span> [ $<span style="color: #a0522d;">AVAR</span> = <span style="color: #8b2252;">"something"</span> ]; <span style="color: #a020f0;">then</span>
    <span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"AVAR was as expected"</span>
<span style="color: #a020f0;">else</span>
    <span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">"UNEXPECTED AVAR"</span>
<span style="color: #a020f0;">fi</span>
</pre>
</div>

<p>
Groovy code equivalent:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #31363b; background-color: #fcfcfc;">AVAR</span>   = <span style="color: #8b2252;">"something"</span>
<span style="color: #31363b; background-color: #fcfcfc;">OTHER</span>  = <span style="color: #8b2252;">"soma else"</span>

<span style="color: #a020f0;">print</span> (<span style="color: #8b2252;">"Variable AVAR is set to "</span>) + AVAR
<span style="color: #a020f0;">if</span> <span style="color: #31363b; background-color: #fcfcfc;">AVAR</span> == <span style="color: #8b2252;">"something"</span>:
    <span style="color: #a020f0;">print</span>( <span style="color: #8b2252;">"AVAR was as expected"</span>)
<span style="color: #a020f0;">else</span>:
    <span style="color: #a020f0;">print</span> (<span style="color: #8b2252;">"UNEXPECTED AVAR"</span>)
</pre>
</div>
</div>
</div>





<div id="outline-container-orgb63e9ff" class="outline-2">
<h2 id="orgb63e9ff"><span class="todo TODO">TODO</span> Properties</h2>
<div class="outline-text-2" id="text-orgb63e9ff">
<p>
A property is a key-value pair associated with an entry. Here, "entry" is:
</p>

<ul class="org-ul">
<li>the whole document</li>
<li>tree started with heading</li>
</ul>

<p>
Properties can be set so they are associated with a single entry, with every entry in a tree, or with every entry in an Org mode file.
</p>

<p>
Properties are like tags, but with a value. 
</p>

<p>
Where can property be defined:
</p>

<ul class="org-ul">
<li><p>
Either anywhere in file (but do it always on top) as 
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="color: #b22222;">#+PROPERTY: property-name-string property-value-string</span>
</pre>
</div></li>
<li><p>
Or in a drawer just below a heading as  
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="color: #a020f0;">:PROPERTIES:</span>
<span style="color: #a020f0;">:property-name-string:</span> property-value-string
<span style="color: #a020f0;">:END:</span>
</pre>
</div></li>
</ul>

<p>
Note the syntactic difference on how the key is defined 
</p>

<ul class="org-ul">
<li>in the PROPERTY section, <b>key is not surrounded with :</b></li>
<li>in the BEGIN_ SRC <b>key is urrounded with :</b></li>
</ul>

<p>
But the *name of the key is in both cases <code>property-name-string</code>
</p>

<p>
For someone using org-babel a lot, I have really only encountered use of properties in defining the overwhelmingly complex property called header-args.
</p>

<p>
I was, for the longest time, I was confused in how the  <b>TODO</b> - finish this
</p>
</div>

<div id="outline-container-org5ca8ffe" class="outline-3">
<h3 id="org5ca8ffe">Testing the <code>header-arguments :dir</code> property</h3>
<div class="outline-text-3" id="text-org5ca8ffe">
</div><ul class="org-ul"><li><a id="orge2aece8"></a>Create some dirs<br /><div class="outline-text-4" id="text-orge2aece8">
<div class="org-src-container">
<pre class="src src-bash">mkdir --parent /home/mzimmermann/tmp/{one,two,three}
<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">""</span> &gt; /home/mzimmermann/tmp/one/file-1.txt
<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">""</span> &gt; /home/mzimmermann/tmp/two/file-2.txt
<span style="color: #483d8b;">echo</span> <span style="color: #8b2252;">""</span> &gt; /home/mzimmermann/tmp/three/file-3.txt
</pre>
</div>


<p>
There is a standard property with key named <code>dir</code>. This is a path to directory where Babel source blocks are executed.
</p>

<p>
This experiment shows how this property can be defined.
</p>
</div></li>

<li><a id="orgade1150"></a>1. First result uses global (top) definition of dir = /home/mzimmermann/tmp/one<br /><div class="outline-text-4" id="text-orgade1150">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(directory-files <span style="color: #8b2252;">"."</span>)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">.</td>
<td class="org-left">..</td>
<td class="org-left">file-1.txt</td>
</tr>
</tbody>
</table>
</div></li>


<li><a id="org7a89a34"></a>2. Second result uses the BEGIN_ SRC  definition of dir = /home/mzimmermann/tmp/two<br /><div class="outline-text-4" id="text-org7a89a34">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(directory-files <span style="color: #8b2252;">"."</span>)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">.</td>
<td class="org-left">..</td>
<td class="org-left">file-2.txt</td>
</tr>
</tbody>
</table>
</div></li>


<li><a id="org9e9a98f"></a>3. Third result uses overriden property dir<br /><div class="outline-text-4" id="text-org9e9a98f">
<p>
This result uses the PROPERTIES  definition of dir = /home/mzimmermann/tmp/three
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(directory-files <span style="color: #8b2252;">"."</span>)
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">.</td>
<td class="org-left">..</td>
<td class="org-left">file-3.txt</td>
</tr>
</tbody>
</table>
</div></li></ul>
</div>
</div>

<div id="outline-container-org0b482ee" class="outline-2">
<h2 id="org0b482ee">Tags</h2>
<div class="outline-text-2" id="text-org0b482ee">
<p>
Are labels for context (context = category)
</p>
</div>
</div>

<div id="outline-container-org5f163f3" class="outline-2">
<h2 id="org5f163f3"><span class="todo TODO">TODO</span> Properies and columns</h2>
<div class="outline-text-2" id="text-org5f163f3">
<p>
:COLUMNS:       %30ITEM %9Approved(Approved?){X} %Owner %11Status %10Time<sub>Estimate</sub>{:} %CLOCKSUM %CLOCKSUM<sub>T</sub>
:Owner<sub>ALL</sub>:     John Peter Paul
:Status<sub>ALL</sub>:    "In progress" "Not started yet" "Finished" ""
:Approved<sub>ALL</sub>:  "[ ]" "[X]"
</p>


<p>
so this is column view?
</p>
</div>

<div id="outline-container-org1484711" class="outline-3">
<h3 id="org1484711">Subtree</h3>
<div class="outline-text-3" id="text-org1484711">
</div>
</div>
</div>

<div id="outline-container-orgde478db" class="outline-2">
<h2 id="orgde478db">Startup indent test (using customize)</h2>
<div class="outline-text-2" id="text-orgde478db">
<p>
dfadsfadsf 
adfadsfasdf
</p>
</div>

<div id="outline-container-org67db1a1" class="outline-3">
<h3 id="org67db1a1">p1</h3>
<div class="outline-text-3" id="text-org67db1a1">
<p>
adfafd
asdfdsf
sdfasdf
</p>
</div>

<ul class="org-ul"><li><a id="orgae58425"></a>p2<br /><div class="outline-text-4" id="text-orgae58425">
<p>
sdfadfs
asdfadsf
adfd
</p>
</div></li></ul>
</div>
</div>

<div id="outline-container-orgc1a8bcc" class="outline-2">
<h2 id="orgc1a8bcc">Test how org-html-publish-to-html and org-publish-attachment messes up export from image link to html by adding <a href="file://">file://</a> to html!!</h2>
<div class="outline-text-2" id="text-orgc1a8bcc">
<p>
<b>The solution to this question is here</b>: <a href="http://stackoverflow.com/questions/14684263/how-to-org-mode-image-absolute-path-of-export-html">http://stackoverflow.com/questions/14684263/how-to-org-mode-image-absolute-path-of-export-html</a>
</p>

<p>
I am using org mode publishing to html, using C-c C-e h H (tried to publish to html file as well, same result). Is there a way to specify the link in org so that the published image path starts with /, like this:
</p>

<p>
&lt;img src="/img/a-image.png" \&gt;?
</p>

<p>
There does not seem to be a way to achieve this. I tried those:
</p>

<p>
Org                                 Published
[[/img/a-image.png]          BAD    &lt;img src="f ile:///img/a-image.png" \&gt;
[[./img/a-image.png]         OK     &lt;img src="./img/a-image.png"\&gt;
[[../img/a-image.png]        OK     &lt;img src="../img/a-image.png"\&gt;
[[f ile:///img/a-image.png]  BAD    &lt;img src="f ile:///img/a-image.png"\&gt;
[[f ile:img/a-image.png]     OK     &lt;img src="img/a-image.png"\&gt;
[[~/some-dir/img/a-image.png] BAD   &lt;img src="f ile:///some-dir/img/a-image.png"\&gt;
</p>

<p>
None of them resulter in what I am trying to get.
</p>

<p>
Basically, the publish puts file: in the src URL, unless the org link image path is one of:
</p>
<ul class="org-ul">
<li>./img</li>
<li>../img ../../img etc</li>
<li><a href="img">img</a></li>
</ul>

<p>
If the org links uses a absolute path, or starts with <a href="file://">file://</a>, the publish adds <a href="file:///">file:///</a> to the img src url. (secondary question: is this a bug or is there a rationalle?)
</p>
</div>
</div>


<div id="outline-container-orgd993eea" class="outline-2">
<h2 id="orgd993eea">Live image capture and display test</h2>
<div class="outline-text-2" id="text-orgd993eea">
<p>
This method is a compromise where published html on posts runs from 2017/04/post.html, reaching ../../img (img are on top, in _site)
</p>

<p>
This works both in org and html using the file: protocol, with a trick of maintaining 
a link to ../../img two levels above org/img
</p>


<div class="figure">
<p><img src="../../img/a-test-blog.org_20170416_034103_28551Ciq.png" alt="a-test-blog.org_20170416_034103_28551Ciq.png" />
</p>
</div>

<p>
This ^ generates: &lt;img src="../../img/a-test-blog.org<sub>20170416</sub><sub>034103</sub><sub>28551Ciq.png</sub>" alt="a-test-blog.org<sub>20170416</sub><sub>034103</sub><sub>28551Ciq.png</sub>" /&gt;
</p>

<p>
Using the new org-custom-link-img-follow works 
</p>


<p>
<img src="/img/a-test-blog.org_20170416_034103_28551Ciq.png" alt="nil"/>
</p>

<p>
This ^ generates: &lt;img src="/img/a-test-blog.org<sub>20170416</sub><sub>034103</sub><sub>28551Ciq.png</sub>" alt="nil"/&gt;
</p>

<p>
But two issues:
</p>

<ol class="org-ol">
<li>The image works in Jekyll but does not show in emacs</li>
<li><p>
It is already obsolete
</p>
<blockquote>
<p>
org-add-link-type is a compiled Lisp function in ‘org-compat.el’.
</p>

<p>
(org-add-link-type TYPE &amp;optional FOLLOW EXPORT)
</p>

<p>
This function is obsolete since Org 9.0;
use `org-link-set-parameters' instead.
</p>

<p>
Add a new TYPE link.
FOLLOW and EXPORT are two functions.
</p>
</blockquote></li>
<li><p>
Try this
</p>
<div class="org-src-container">
<pre class="src src-elisp">(org-open-file-with-emacs <span style="color: #8b2252;">"./img/a-test-blog.org_20170416_034103_28551Ciq.png"</span>)
</pre>
</div></li>
<li><p>
This line shows why the img: will not display in emacs - only file: can be image
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #a020f0;">when</span> (<span style="color: #a020f0;">and</span> (equal (org-element-property <span style="color: #483d8b;">:type</span> link) <span style="color: #8b2252;">"file"</span>)
</pre>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-org1ddca15" class="outline-2">
<h2 id="org1ddca15">Test my specific org link types - <b>img:</b> and <b>post-jekyll:</b></h2>
<div class="outline-text-2" id="text-org1ddca15">
</div><div id="outline-container-org7b72722" class="outline-3">
<h3 id="org7b72722">Test img: link</h3>
<div class="outline-text-3" id="text-org7b72722">
<p>
<img src="/img/a-test-blog.org_20170416_034103_28551Ciq.png" alt="nil"/>
</p>
</div>
</div>

<div id="outline-container-org0e143ed" class="outline-3">
<h3 id="org0e143ed">Test post-jekyll: link</h3>
<div class="outline-text-3" id="text-org0e143ed">
<p>
The precondition is the post must be already org2-published
</p>

<p>
<a href="{% post_url 2017-04-08-blog-in-org-2-jekyll---1.-motivation %}">a short series about writing in org mode</a>
</p>
</div>
</div>
</div>
