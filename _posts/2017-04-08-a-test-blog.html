---
date: 2017-04-08
tags: 
- tag1 org2jekyll
author: mzimmerm
layout: post
title: a-test-blog 
excerpt: Testing org2jekyll-create-draft
categories: 
- categories_required
comments: true
html_mathjax: path:"http://cdn.mathjax.org/mathjax/latest/MathJax.js"
---
<p>
This file is testing  misc org conversions to Html.
</p>


<p>
All props except dir are front matter, generated by <code>org2jekyll-create-draft</code>
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Basic Babel export to Html</h2>
<div class="outline-text-2" id="text-1">
<p>
This source:
</p>

<div class="org-src-container">

<pre class="src src-org">#+BEGIN_SRC bash :exports both
ls -1
</pre>
</div>

<p>
Results in this:
</p>

<p>
#+END<sub>SRC</sub>
</p>
<div class="org-src-container">

<pre class="src src-bash">ls -1
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">What did <code>org2jekyll-create-draft</code> do</h2>
<div class="outline-text-2" id="text-2">
<p>
It created an empty file with Org front matter like this:
</p>

<div class="org-src-container">

<pre class="src src-org">#+STARTUP: showall
#+STARTUP: hidestars
#+OPTIONS: H:2 num:nil tags:nil toc:nil timestamps:t
#+LAYOUT: post
#+AUTHOR: mzimmerm
#+DATE: 2017-04-08 Sat 17:23
#+TITLE: a-test-blog 
#+DESCRIPTION: Testing org2jekyll-create-draft
#+TAGS: org_mode org2jekyll
#+CATEGORIES: categories_required
</pre>
</div>

<p>
The file name is <b>a-test-blog.org</b> so this is concatenated from title, with no date. 
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Verbatim vs Code = vs ~</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>This is a <code>literal (verbatim) text</code> (surrounded by = ) in text. 
</li>

<li>This is a <code>literal code section text</code>  (surrounded by ~ ) in text. 
</li>

<li>So the above, by default, shows that verbatim and code has same font after conversion to html.
</li>

<li>Next is src _ bash exports code: #+BEGIN<sub>SRC</sub> bash
</li>
</ul>
<p>
ls -l
#+END<sub>SRC</sub> as inline code - could just use <code>ls -l</code> but the src _ bash allows other options.
</p>

<ul class="org-ul">
<li>Next is src _ bash exports both does not work: src_ bash[:exports both]{ls -l} as inline code.
</li>

<li>Next is src _ bash surrounded by ~ in text: <code>src_bash[:exports code]{ls -l}</code>
</li>

<li>Last is using BEGIN_ SRC - this seems to format and everything

<div class="org-src-container">

<pre class="src src-bash">ls -l
</pre>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">3 types of lists</h2>
<div class="outline-text-2" id="text-4">
<p>
The list test below is borrowed from <a href="http://www.network-theory.co.uk/docs/orgmode/Plainlists.html">http://www.network-theory.co.uk/docs/orgmode/Plainlists.html</a>
</p>

<p>
<i>Ordered List</i>: My favorite scenes are (in this order)
</p>
<ol class="org-ol">
<li>The attack of the Rohirrim
</li>
<li>Eowyn's fight with the witch king
<ul class="org-ul">
<li>This was already my favorite scene in the book
</li>
<li>I really like Miranda Otto.
</li>
</ul>
</li>
<li>Peter Jackson being shot by Legolas
</li>
<li>on DVD only
</li>
</ol>
<p>
<i>Unordered List</i>: 
</p>
<ul class="org-ul">
<li>He makes a really funny face when it happens.
</li>
<li>But in the end, no individual scenes matter but the film as a whole.
</li>
</ul>
<p>
<i>Description List</i>: Does not indent items. Important actors in this film are:
</p>
<dl class="org-dl">
<dt> Elijah Wood   </dt><dd>He plays Frodo
</dd>
<dt> Sean Astin    </dt><dd>He plays Sam, Frodo's friend.  I still remember 
him very well from his role as Mikey Walsh in The Goonies.
</dd>
<dt> Abrakah Dabra </dt><dd>Is cool.
</dd>
</dl>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Code highlighting</h2>
<div class="outline-text-2" id="text-5">
<p>
Bash code:
</p>

<div class="org-src-container">

<pre class="src src-bash">AVAR="something"
OTHER="soma else"

echo "Variable AVAR is set to ${AVAR}"
if [ $AVAR = "something" ]; then
    echo "AVAR was as expected"
else
    echo "UNEXPECTED AVAR"
fi
</pre>
</div>

<p>
Groovy code equivalent:
</p>

<div class="org-src-container">

<pre class="src src-python">AVAR   = "something"
OTHER  = "soma else"

print ("Variable AVAR is set to ") + AVAR
if AVAR == "something":
    print( "AVAR was as expected")
else:
    print ("UNEXPECTED AVAR")
</pre>
</div>
</div>
</div>





<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="todo TODO">TODO</span> Properties</h2>
<div class="outline-text-2" id="text-6">

<p>
A property is a key-value pair associated with an entry. Here, "entry" is:
</p>

<ul class="org-ul">
<li>the whole document
</li>
<li>tree started with heading
</li>
</ul>

<p>
Properties can be set so they are associated with a single entry, with every entry in a tree, or with every entry in an Org mode file.
</p>

<p>
Properties are like tags, but with a value. 
</p>

<p>
Where can property be defined:
</p>

<ul class="org-ul">
<li>Either anywhere in file (but do it always on top) as 
<div class="org-src-container">

<pre class="src src-org">#+PROPERTY: property-name-string property-value-string
</pre>
</div>
</li>
<li>Or in a drawer just below a heading as  
<div class="org-src-container">

<pre class="src src-org">:PROPERTIES:
:property-name-string: property-value-string
:END:
</pre>
</div>
</li>
</ul>

<p>
Note the syntactic difference on how the key is defined 
</p>

<ul class="org-ul">
<li>in the PROPERTY section, <b>key is not surrounded with :</b> 
</li>
<li>in the BEGIN_ SRC <b>key is urrounded with :</b> 
</li>
</ul>

<p>
But the *name of the key is in both cases <code>property-name-string</code>
</p>

<p>
For someone using org-babel a lot, I have really only encountered use of properties in defining the overwhelmingly complex property called header-args.
</p>

<p>
I was, for the longest time, I was confused in how the  <b>TODO</b> - finish this
</p>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">Testing the <code>header-arguments :dir</code> property</h3>
<div class="outline-text-3" id="text-6-1">
</div><ul class="org-ul"><li><a id="sec-6-1-1" name="sec-6-1-1"></a>Create some dirs<br  /><div class="outline-text-4" id="text-6-1-1">
<div class="org-src-container">

<pre class="src src-bash">mkdir --parent /home/mzimmermann/tmp/{one,two,three}
echo "" &gt; /home/mzimmermann/tmp/one/file-1.txt
echo "" &gt; /home/mzimmermann/tmp/two/file-2.txt
echo "" &gt; /home/mzimmermann/tmp/three/file-3.txt
</pre>
</div>


<p>
There is a standard property with key named <code>dir</code>. This is a path to directory where Babel source blocks are executed.
</p>

<p>
This experiment shows how this property can be defined.
</p>
</div>
</li>

<li><a id="sec-6-1-2" name="sec-6-1-2"></a>1. First result uses global (top) definition of dir = /home/mzimmermann/tmp/one<br  /><div class="outline-text-4" id="text-6-1-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(directory-files ".")
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">.</td>
<td class="left">..</td>
<td class="left">file-1.txt</td>
</tr>
</tbody>
</table>
</div>
</li>


<li><a id="sec-6-1-3" name="sec-6-1-3"></a>2. Second result uses the BEGIN_ SRC  definition of dir = /home/mzimmermann/tmp/two<br  /><div class="outline-text-4" id="text-6-1-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(directory-files ".")
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">.</td>
<td class="left">..</td>
<td class="left">file-2.txt</td>
</tr>
</tbody>
</table>
</div>
</li>


<li><a id="sec-6-1-4" name="sec-6-1-4"></a>3. Third result uses overriden property dir<br  /><div class="outline-text-4" id="text-6-1-4">

<p>
This result uses the PROPERTIES  definition of dir = /home/mzimmermann/tmp/three
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(directory-files ".")
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">.</td>
<td class="left">..</td>
<td class="left">file-3.txt</td>
</tr>
</tbody>
</table>
</div>
</li></ul>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Tags</h2>
<div class="outline-text-2" id="text-7">
<p>
Are labels for context (context = category)
</p>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="todo TODO">TODO</span> Properies and columns</h2>
<div class="outline-text-2" id="text-8">


<p>
so this is column view?
</p>
</div>

<div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1">Subtree</h3>
<div class="outline-text-3" id="text-8-1">
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">Startup indent test (using customize)</h2>
<div class="outline-text-2" id="text-9">
<p>
dfadsfadsf 
adfadsfasdf
</p>
</div>

<div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1">p1</h3>
<div class="outline-text-3" id="text-9-1">
<p>
adfafd
asdfdsf
sdfasdf
</p>
</div>

<ul class="org-ul"><li><a id="sec-9-1-1" name="sec-9-1-1"></a>p2<br  /><div class="outline-text-4" id="text-9-1-1">
<p>
sdfadfs
asdfadsf
adfd
</p>
</div>
</li></ul>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">Test how org-html-publish-to-html and org-publish-attachment messes up export from image link to html by adding <a href="file://">file://</a> to html!!</h2>
<div class="outline-text-2" id="text-10">
<p>
<b>The solution to this question is here</b>: <a href="http://stackoverflow.com/questions/14684263/how-to-org-mode-image-absolute-path-of-export-html">http://stackoverflow.com/questions/14684263/how-to-org-mode-image-absolute-path-of-export-html</a>
</p>

<p>
I am using org mode publishing to html, using C-c C-e h H (tried to publish to html file as well, same result). Is there a way to specify the link in org so that the published image path starts with /, like this:
</p>

<p>
&lt;img src="/img/a-image.png" \&gt;?
</p>

<p>
There does not seem to be a way to achieve this. I tried those:
</p>

<p>
Org                                 Published
[[/img/a-image.png]          BAD    &lt;img src="f ile:///img/a-image.png" \&gt;
[[./img/a-image.png]         OK     &lt;img src="./img/a-image.png"\&gt;
[[../img/a-image.png]        OK     &lt;img src="../img/a-image.png"\&gt;
[[f ile:///img/a-image.png]  BAD    &lt;img src="f ile:///img/a-image.png"\&gt;
[[f ile:img/a-image.png]     OK     &lt;img src="img/a-image.png"\&gt;
[[~/some-dir/img/a-image.png] BAD   &lt;img src="f ile:///some-dir/img/a-image.png"\&gt;
</p>

<p>
None of them resulter in what I am trying to get.
</p>

<p>
Basically, the publish puts file: in the src URL, unless the org link image path is one of:
</p>
<ul class="org-ul">
<li>./img
</li>
<li>../img ../../img etc
</li>
<li><a href="img">img</a> 
</li>
</ul>

<p>
If the org links uses a absolute path, or starts with <a href="file://">file://</a>, the publish adds <a href="file:///">file:///</a> to the img src url. (secondary question: is this a bug or is there a rationalle?)
</p>
</div>
</div>


<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">Live image capture and display test</h2>
<div class="outline-text-2" id="text-11">
<p>
This method is a compromise where published html on posts runs from 2017/04/post.html, reaching ../../img (img are on top, in _site)
</p>

<p>
This works both in org and html using the file: protocol, with a trick of maintaining 
a link to ../../img two levels above org/img
</p>


<div class="figure">
<p><img src="../../img/a-test-blog.org_20170416_034103_28551Ciq.png" alt="a-test-blog.org_20170416_034103_28551Ciq.png" />
</p>
</div>

<p>
This ^ generates: &lt;img src="../../img/a-test-blog.org<sub>20170416</sub><sub>034103</sub><sub>28551Ciq</sub>.png" alt="a-test-blog.org<sub>20170416</sub><sub>034103</sub><sub>28551Ciq</sub>.png" /&gt;
</p>

<p>
Using the new org-custom-link-img-follow works 
</p>


<p>
<img src="/img/a-test-blog.org_20170416_034103_28551Ciq.png" alt="nil"/>
</p>

<p>
This ^ generates: &lt;img src="/img/a-test-blog.org<sub>20170416</sub><sub>034103</sub><sub>28551Ciq</sub>.png" alt="nil"/&gt;
</p>

<p>
But two issues:
</p>

<ol class="org-ol">
<li>The image works in Jekyll but does not show in emacs
</li>
<li>It is already obsolete
<blockquote>
<p>
org-add-link-type is a compiled Lisp function in ‘org-compat.el’.
</p>

<p>
(org-add-link-type TYPE &amp;optional FOLLOW EXPORT)
</p>

<p>
This function is obsolete since Org 9.0;
use `org-link-set-parameters' instead.
</p>

<p>
Add a new TYPE link.
FOLLOW and EXPORT are two functions.
</p>
</blockquote>
</li>
<li>Try this
<div class="org-src-container">

<pre class="src src-elisp">(org-open-file-with-emacs "./img/a-test-blog.org_20170416_034103_28551Ciq.png")
</pre>
</div>
</li>
<li>This line shows why the img: will not display in emacs - only file: can be image
<div class="org-src-container">

<pre class="src src-elisp">(when (and (equal (org-element-property :type link) "file")
</pre>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12">Test my specific org link types - <b>img:</b> and <b>post-jekyll:</b></h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1">Test img: link</h3>
<div class="outline-text-3" id="text-12-1">
<p>
<img src="/img/a-test-blog.org_20170416_034103_28551Ciq.png" alt="nil"/>
</p>
</div>
</div>

<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2">Test post-jekyll: link</h3>
<div class="outline-text-3" id="text-12-2">
<p>
The precondition is the post must be already org2-published
</p>

<p>
<a href="{% post_url 2017-04-08-blog-in-org-2-jekyll---1.-motivation %}">a short series about writing in org mode</a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13">Math Formulas using Latex</h2>
<div class="outline-text-2" id="text-13">
<p>
There are 3 ways to put Latex in org text
</p>

<ol class="org-ol">
<li>Start with \begin .. \end{equation}, surround by empty lines
</li>
</ol>

<p>
\begin{equation}  x=\sqrt{b}
\end{equation}
</p>

<ol class="org-ol">
<li>Start with double dollar $ $ on lines above and below
</li>
</ol>

<p>
$$
x = \sqrt{b} + c^4
$$
</p>

<ol class="org-ol">
<li>If in doubt, use a group inside slash-( slash-) like in this: ~\ ( some latex \ ). That  works even inline, e.g. \( x = \sqrt{b} + c^4 \) - nice.
</li>
</ol>
</div>
</div>
